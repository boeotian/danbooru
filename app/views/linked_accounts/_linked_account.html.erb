<%# linked_account %>

<%= tag.div class: ["linked-account", (linked_account.persisted? ? "linked-account-active" : "linked-account-inactive")] do %>
  <%= link_to linked_account.site_url, class: "linked-account-media", target: "_blank" do %>
    <%= tag.img src: linked_account_logo_url(linked_account.site_name) %>
  <% end %>

  <div class="linked-account-main">
    <div class="linked-account-header">
      <div class="linked-account-header-left">
        <div class="linked-account-site">
          <%= linked_account.site_name %>
        </div>

        <% if linked_account.persisted? %>
          <span class="linked-account-username">
            <i class="linked-account-status-icon fas fa-check-circle"></i>
            <%= link_to_if linked_account.profile_url.present?, linked_account.user_name, linked_account.profile_url, target: "_blank" %>
          </span>
        <% end %>
      </div>

      <div class="linked-account-header-right">
        <% if linked_account.persisted? %>
          <%= link_to linked_account_path(linked_account), method: :delete, remote: true, class: "button button-outline-primary unlink-linked-account", "data-confirm": "Are you sure you want to unlink this account?" do %>
            <i class="fas fa-unlink"></i>
            Unlink
          <% end %>
        <% else %>
          <%= link_to new_linked_account_path(site: linked_account.site_name), remote: true, class: "button button-primary link-linked-account", target: "_blank" do %>
            <i class="fas fa-link"></i>
            Link
          <% end %>
        <% end %>
      </div>
    </div>

    <ul class="linked-account-body">
      <% if linked_account.site_name == "Discord" %>
        <li>Get a role in the <%= link_to "Danbooru Discord", Danbooru.config.discord_server_url %>.</li>
      <% end %>
    </ul>
  </div>
<% end %>
